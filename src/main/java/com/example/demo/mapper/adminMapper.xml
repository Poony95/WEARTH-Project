<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">

    <!-- 회원 테이블 조회 -->

    <!-- 유저리스트 -->
    <select id = "getTotalUserList" resultType="usersVO">
        SELECT *
        FROM (
        SELECT ROWNUM as row_num, u.*
        FROM (SELECT * FROM users WHERE userno IS NOT NULL
        ORDER BY userno) u
        )
        WHERE row_num BETWEEN #{start} AND #{end}

    </select>

    <!-- 총 회원수 -->
    <select id = "getTotalUser" resultType = "java.lang.Integer">
        select count(*) from users
    </select>

    <!-- 아이디 중복확인 -->
    <select id ="checkId" resultType = "java.lang.Integer">
        SELECT id FROM users WHERE id = #{id}
    </select>


    <!-- 회원등록 -->
    <insert id="insertUser">
        INSERT INTO users (userno, id, pwd, u_name, date_birth, gender, email, nickname, date_reg, residence, phone, point, u_status, Role)
        VALUES (seq_userno.NEXTVAL, #{id}, #{pwd}, #{u_name}, #{date_birth}, #{gender}, #{email}, #{nickname}, sysdate, #{residence}, #{phone}, #{point}, 'Y', 'USER')
    </insert>

    <!-- 회원삭제 -->
    <delete id = "deleteUser">
        delete from users where userno = #{userno}
    </delete>


</mapper>