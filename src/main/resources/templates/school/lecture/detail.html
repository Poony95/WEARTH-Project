<!DOCTYPE html>
<html>
<head>
<title>강연 상세페이지</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
    
<link rel="stylesheet" href="/css/styles.css">
<link rel="stylesheet" href="/css/main/style.css">
<link rel="stylesheet" href="/css/education/education.css">
<link rel="stylesheet" href="/css/education/detail.css">

<meta name="description">
<meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
<meta name="generator" content="Hugo 0.84.0">
<link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/blog/">
<!-- Bootstrap core CSS -->
<link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Custom styles for this template -->
<link href="https://fonts.googleapis.com/css?family=Playfair&#43;Display:700,900&amp;display=swap" rel="stylesheet">
<!-- Custom styles for this template -->
<link href="blog.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="/js/education/detail.js"></script>  
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
<meta name="_csrf" th:content="${_csrf.token}"/>
</head>
<body>
<div class="container">
	<div th:include="/main/header.html"></div>
	
	<!-- 전체 레이아웃 --> 
	<div class="row g-5">
		
		<!-- 왼쪽 레이아웃 -->
	    <div class="col-md-8">
			
			<!-- 상세 메인이미지 -->
			<article class="blog-post"><img class="detailImg" th:src="@{'/images/education/'+${l.lecFile}}" ><br />
			</article>
			
			<!-- 그룹 버튼 -->
			<article class="blog-post">
				<div class="btn-group btn-group-sm" role="group" aria-label="Basic radio toggle button group">
				  <input onclick="showContent(1)" type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked>
				  <label class="btn btn-outline-secondary" for="btnradio1">상세</label>
				  <input onclick="showContent(2)" type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off">
				  <label class="btn btn-outline-secondary" for="btnradio2">후기</label>
				  <input onclick="showContent(3)" type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off">
				  <label class="btn btn-outline-secondary" for="btnradio3">문의</label>
				</div>
			</article>
			<hr />
			
			<!-- 상세 -->
		    <article class="blog-post">
			<div  id="detail" class="content">
		         <img class="img-fluid" th:src="@{'/images/education/detail/'+${l.lecDetailFile}}" />
			</div>
			 </article>
			 
       		<!-- 후기 -->
	        <article class="blog-post">
		  	<div  id="review" class="content" style="display: none;">
			 	<br />
				  <h2>강연후기</h2>
				  <p>강연 관련 후기를 남겨주세요:)</p>            
				<br />
				
				  <form id="comment" action="">
					  <input type="text" name="content"	id="content" size="50" />
					  <button id="btnReply" class="btn custom-btn" style="background-color : #58b483;">등록</button>
				  </form>
				
			    <div class="comments">
		 			 <!-- 댓글 내용은 JavaScript로 동적으로 추가할 예정 -->
				</div>
		  	</div>
	        </article>
			  
			  
			  <!-- 문의 -->
			 <article class="blog-post">
			  	<div id="opinion" class="content" style="display: none;">
			    <br />
			    <div class="row">
			    <div class="col">
			    <h2>강연문의</h2>
			    <p>강연 관련 문의 사항을 남겨주세요:)</p>
			    </div>
			    
			    <!-- 게시글 등록 버튼 -->
			    <div class="col d-grid gap-2 d-md-flex justify-content-md-end">
					<button type="button" class="btn custom-btn" data-bs-toggle="modal" data-bs-target="#exampleModal" >게시글 등록</button>
				</div>
					<!-- 게시글 등록 양식 모달 -->
					<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
					  <div class="modal-dialog">
					    <div class="modal-content">
					      <div class="modal-header">
					        <h5 class="modal-title" id="exampleModalLabel">문의하기</h5>
					        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					      </div>
					      <div class="modal-body">
					        <form>
					          <div class="mb-3">
					            <label for="recipient-name" class="col-form-label">제목</label>
					            <input type="text" class="form-control" id="recipient-name" name="title">
					          </div>
					          <div class="mb-3">
					            <label for="message-text" class="col-form-label">내용</label>
					            <textarea class="form-control" id="message-text" name="content" style="height: 190px;"></textarea>
					          </div>
					          <div class="mb-3">
							    <label for="formFileMultiple" class="col-form-label">첨부파일 </label>
							    <input class="form-control" type="file" id="formFileMultiple">
						  	  </div>
						     <div class="form-check form-switch" id="secreat" style="margin:20px;">
							  <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault">
							  <label class="form-check-label" for="flexSwitchCheckDefault">비밀글</label>
							</div>	
							<div class="mb-3" id="mb-3" style="display: none;">
							  <label for="pwd" class="col-form-label">비밀번호</label>
							  <input type="password" class="form-control" id="pwd" placeholder="Enter password" name="pwd">
							</div>					  	  
					        </form>
					      </div>
					      <div class="modal-footer">
					        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
					        <button type="button" class="btn custom-btn">등록</button>
					      </div>
					    </div>
					  </div>
					</div>
				
				
				</div>
				
			    <br />
			    
			    <table class="table table-hover">
					<colgroup>
				        <col style="width: 10%;">
				        <col style="width: 50%;">
				        <col style="width: 15%;">
				        <col style="width: 15%;">
				    </colgroup>
			        <thead>
			            <tr>
			                <th>번호</th>
			                <th width="50%">제목</th>
			                <th>작성자</th>
			                <th>작성일</th>
			            </tr>
			        </thead>
			        <tbody>
			            <tr data-toggle="collapse" data-target="#details1" class="clickable">
			                <td>3</td>
			                <td>강연관련문의드립니다.</td>
			                <td>Doe</td>
			                <td>2023-07-25</td>
			            </tr>
			            <tr id="details1" class="collapse">
			                <td colspan="4" class="post-details">
			                    <label for="password1">비밀번호를 입력하세요:</label>
			                    <input type="password" id="password1" required>
			                    <button onclick="checkPassword(1)" class="btn custom-btn">확인</button>
			                    <br><br>
			                    <div id="postContent1" style="display: none;">
			                        안녕하세요 강연관련 해서 문의드려요~~ 이러쿵 저러쿵 롤로로롤롤ㄹ롤로라랄랄랄릴ㄹ라랄랄
			                        <br><br>
			                        [답변] <br>
			                        안녕하세요 고갱님 ^^ 해당 강연은 최대 수용인원이 요렁쿵입니다. 더욱 자세한 정보를 듣고 싶으시다면 전화주세요~
			                    </div>
			                </td>
			            </tr>
			            <tr data-toggle="collapse" data-target="#details2" class="clickable">
			                <td>2</td>
			                <td>환불관련문의드립니다.</td>
			                <td>Doe</td>
			                <td>2023-07-13</td>
			            </tr>
			            <tr id="details2" class="collapse">
			                <td colspan="4" class="post-details">
			                    <label for="password2">비밀번호를 입력하세요:</label>
			                    <input type="password" id="password2" required>
			                    <button onclick="checkPassword(2)" class="btn custom-btn">확인</button>
			                    <br><br>
			                    <div id="postContent2" style="display: none;">
			                        안녕하세요 환불관련 해서 문의드려요~~ 이러쿵 저러쿵 롤로로롤롤ㄹ롤로라랄랄랄릴ㄹ라랄랄
			                        <br><br>
			                        [답변] <br>
			                        안녕하세요 고갱님 ^^ 환 불 처리 해드렸습니다~ 2~3일 정도 소요 됩니다. 
			                    </div>
			                </td>
			            </tr>
			             <tr data-toggle="collapse" data-target="#details3" class="clickable">
			                <td>1</td>
			                <td>환불관련 문의드립니다.</td>
			                <td>Doe</td>
			                <td>2023-07-12</td>
			            </tr>
			            <tr id="details3" class="collapse">
			                <td colspan="4" class="post-details">
			                    <label for="password3">비밀번호를 입력하세요:</label>
			                    <input type="password" id="password3" required>
			                    <button onclick="checkPassword(3)"  class="btn custom-btn">확인</button>
			                    <br><br>
			                    <div id="postContent3" style="display: none;">
			                        안녕하세요 환불관련 해서 문의드려요~~ 이러쿵 저러쿵 롤로로롤롤ㄹ롤로라랄랄랄릴ㄹ라랄랄
			                        <br><br>
			                        [답변] <br>
			                        안녕하세요 고갱님 ^^ 환 불 처리 해드렸습니다~ 2~3일 정도 소요 됩니다. 
			                    </div>
			                </td>
			            </tr>
			        </tbody>
			    </table>
			</div>
			 </article>
	    </div>
		
		<!-- 오른쪽 레이아웃 -->
	    <div class="col-md-4">
	      <div class="position-sticky" style="top: 2rem;">
			  
			<!-- 제목, 가격 --> 
	        <div class="p-4 mb-3 bg-white rounded" style="border: 1px solid lightgrey;">
	      		<div>[<span  style="font-weight: bold;" th:text="${l.lecStatus}"></span>] <span  style="font-weight: bold;" th:text="${l.lecName}"></span></div>
				<br />
	           <div class="row">
	      		<div class="col"><span class="mb-0" style="color: #43a06f; font-weight: bold;" th:text="${l.lecPrice}"></span> <span style="color: #43a06f; font-weight: bold;">원</span></div>
	           <div class="col" th:if="${session.u}" sec:authorize="isAuthenticated()">
					    <a th:onclick="'likeOrUnlike2(\'' + ${l.lecNO} + '\'); return false;'" style="margin-left: 100px;">
					        <img th:id="${l.lecNO}" th:src="${l.liked ? '/images/education/redHeart.jpg' : '/images/education/whiteHeart.jpg'}" style="width:28px" />
					    </a>
					</div>
	        </div>
	        </div>
	        
	        <!-- 요약 --> 
	        <div class="p-4">
	          <ol class="list-unstyled mb-0">
				<li style="font-weight: bold;">내용</li>
	            <li th:text="${l.lecContent}"></li>
	            <li style="font-weight: bold;">강연대상</li>
	            <li th:text="${l.lecApp}"></li>
				<li style="font-weight: bold;">날짜</li>	
	             <li th:text="${l.lecDate}"></li>
	            <li style="font-weight: bold;">장소</li>
	            <li th:text="${l.lecAddr}"></li>
	            <li style="font-weight: bold;">출처</li>
	            <li th:text="${l.lecturer}"></li>
	          </ol>
	        </div>
	        
	        <!-- 신청버튼 --> 
			<div class="p-4">
	       		<a class="btn custom-btn" style="width: 320px; " href="#">신청하기</a>
			</div>
			
	      </div>
	    </div>
	    
	</div>

	<div th:include="/main/footer.html"></div>
</div>
<script>
// 강연 디테일 좋아요 버튼 
var isLiked = {};
function likeOrUnlike2(id) {
  var heartImage = document.getElementById(id);
 	var header = $("meta[name='_csrf_header']").attr('content');
	var token = $("meta[name='_csrf']").attr('content');
  console.log("id : "+ id);
  if (!isLiked[id]) {
    heartImage.src = "/images/education/redHeart.jpg";
    isLiked[id] = true;
    $.ajax({
		url : "/school/lecture/liked/insert",
		type : "post",
		data : {lecNO : id},
		beforeSend : function(xhr){
			xhr.setRequestHeader(header, token);
		}
	});
  } else {
    heartImage.src = "/images/education/whiteHeart.jpg";
    isLiked[id] = false;
      $.ajax({
		url : "/school/lecture/liked/delete",
		type : "post",
		data : {lecNO : id},
		beforeSend : function(xhr){
			xhr.setRequestHeader(header, token);
		}
	});
  }
}
</script>
  </body>
</html>